
import subprocess
import os

def is_tree_installed():
    """Check if the 'tree' command is available on the system."""
    result = subprocess.run(['which', 'tree'], stdout=subprocess.PIPE, stderr=subprocess.PIPE)
    return result.returncode == 0

def install_tree():
    """Install the 'tree' command using apt package manager."""
    subprocess.run(['sudo', 'apt', 'update'], check=True)
    subprocess.run(['sudo', 'apt', 'install', 'tree', '-y'], check=True)

def create_directory_if_not_exists(directory):
    """Create directory if it does not exist."""
    if not os.path.exists(directory):
        os.makedirs(directory)

def generate_directory_tree(root_path, output_file):
    """Generate the directory tree, excluding certain directories, and save to a file."""
    exclusions = 'node_modules|other|exclusions'
    create_directory_if_not_exists(os.path.dirname(output_file))
    with open(output_file, 'w') as file:
        subprocess.run(['tree', '-I', exclusions, root_path], stdout=file)

def main():
    if not is_tree_installed():
        install_tree()
    root_path = '/path/to/root/myproject/src/'
    output_file = '/root/FumeData/d8644d1e-6260-4f1b-a521-15415426e981/directory-tree.txt'
    generate_directory_tree(root_path, output_file)

if __name__ == '__main__':
    main()
